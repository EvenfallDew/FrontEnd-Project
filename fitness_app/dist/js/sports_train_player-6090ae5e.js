!function(){"use strict";var e={921:function(e,t,n){n.r(t)}},t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(921),document.ready((function(){var e=document.querySelector("#video"),t=document.querySelector("#currentPart"),n=document.querySelector("#countPart"),o=document.querySelector("#title"),r=document.querySelector("#progress"),c=document.querySelector("#prevBtn"),u=document.querySelector("#nextBtn"),i=document.querySelector("#mask"),l=document.querySelector("#continuePlay"),a=document.querySelector("#stopPlay"),s=document.querySelector("#pauseBtn"),d=document.querySelector("#currentImg"),y=document.querySelector("#curTitle"),m=JSON.parse(localStorage.getItem("fragments")),f=0,p=m.length,S=screen.width,v=null;function g(){e.src=$utils.BASE_URL+m[f].videoUrl,e.play(),q(),t.textContent=f+1,n.textContent=p,o.textContent=m[f].title}g(),e.addEventListener("ended",(function(){++f<p?g():clearInterval(v)})),u.addEventListener("click",(function(){++f<=p-1?g():f=p-1})),c.addEventListener("click",(function(){--f<0?f=0:g()}));var h=[];function q(){clearInterval(v),v=setInterval((function(){h[f]=e.currentTime;var t=e.currentTime/e.duration*S;r.style.width=t+"px"}),30)}s.addEventListener("click",(function(){i.style.display="block",e.pause(),clearInterval(v),f==p&&(f=p-1),d.src=$utils.BASE_URL+m[f].imgUrl,y.textContent=m[f].title})),l.addEventListener("click",(function(){i.style.display="none",e.play(),q()})),a.addEventListener("click",(function(){i.style.display="none";var e=location.search.split("=")[1],t=JSON.parse(localStorage.getItem("user")).userId,n=0;h.forEach((function(e){n+=e})),axios.post($utils.BASE_URL+"/sports/saveTrain",{id:e,userId:t,takeTime:n,calorie:1.2*n}).then((function(e){0==e.data.status?($utils.showToast("icon-toast-correct","数据保存成功",2e3),setTimeout((function(){location.href="./sports_train.html"}),2e3)):($utils.showToast("icon-toast-wrong","请联系后台",2e3),setTimeout((function(){location.href="./sports_train.html"}),2e3))})).catch((function(e){console.log(e)}))}))}))}();