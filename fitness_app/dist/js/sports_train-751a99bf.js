!function(){"use strict";var e={224:function(e,s,n){n.r(s)}},s={};function n(t){if(s[t])return s[t].exports;var a=s[t]={exports:{}};return e[t](a,a.exports,n),a.exports}n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(224),$utils.load(1400),document.ready((function(){$utils.commonHeader(),$utils.commonFooter();var e=JSON.parse(localStorage.getItem("user")).userId,s=document.querySelector("#newCourse"),n=document.querySelector("#oldCourse");axios.get($utils.BASE_URL+"/sports/courseList?id="+e).then((function(e){var t,a,o=e.data;if(0==o.status){var r=o.data;if(0==r.length)return;var c=r.find((function(e){return 1==e.latest})),i=r.filter((function(e){return 0==e.latest}));a='\n            <a class="info mt10" href="./sports_train_detail.html?courseId='+(t=c).courseId+'">\n                <img class="info-img" src="'+($utils.BASE_URL+t.imgurl)+'" alt="img">\n                <p class="course-title mt10"><span class="course-id">'+t.courseId+"</span>"+t.name+'</p>\n                <p class="desc mt10">'+t.desc+"</p>\n            </a>\n        ",s.innerHTML=a,function(e){var s="";e.forEach((function(e){s+='\n                <a class="info mt10" href="./sports_train_detail.html?courseId='+e.courseId+'">\n                    <img class="info-img" src="'+($utils.BASE_URL+e.imgurl)+'" alt="img">\n                    <p class="course-title mt10"><span class="course-id">'+e.courseId+"</span>"+e.name+'</p>\n                    <p class="desc mt10">'+e.desc+"</p>\n                </a>\n            "})),n.innerHTML=s}(i)}})).catch((function(e){console.log(e)}));var t=document.querySelector("#changeMask"),a=document.querySelector("#changeBtn"),o=document.querySelector("#saveBtn"),r=["3"];function c(){for(var e=document.querySelectorAll(".course-id"),s=0;s<e.length;s++)-1==r.indexOf(e[s].innerHTML)&&r.push(e[s].innerHTML)}a.addEventListener("click",(function(){t.style.display="flex",axios.get($utils.BASE_URL+"/sports/allcourse").then((function(e){var s=e.data;0==s.status&&(function(e){c();var s="";e.forEach((function(e){if(3!=e.courseId){if(-1==r.indexOf(String(e.courseId)))var n='<span id="addCourse" class="add-course">添加课程</span><span id="delCourse" class="del-course" style="display:none;">删除课程</span>';else n='<span id="addCourse" class="add-course" style="display:none;">添加课程</span><span id="delCourse" class="del-course">删除课程</span>';s+='\n                    <a class="info mt10">\n                        <img class="info-img" src="'+($utils.BASE_URL+e.imgurl)+'" alt="img">\n                        <p class="course-title mt10">\n                            <span>\n                                <span class="all-course-id">'+e.courseId+"</span>\n                                <span>"+e.name+"</span>\n                            </span>\n                            "+n+'\n                        </p>\n                        <p class="desc mt10">'+e.desc+"</p>\n                    </a>\n                "}})),changeCourse.innerHTML=s}(s.data),c())})).catch((function(e){console.log(e)}))})),document.querySelector("#changeCourse").addEventListener("click",(function(e){if("add-course"==e.target.className){var s=e.path[1].children[0].children[0].innerHTML;e.path[1].children[1].style.display="none",e.path[1].children[2].style.display="block",-1==r.indexOf(s)&&r.push(s)}if("del-course"==e.target.className){var n=e.path[1].children[0].children[0].innerHTML;if(e.path[1].children[1].style.display="block",e.path[1].children[2].style.display="none",-1!=r.indexOf(n)){var t=r.indexOf(n);r.splice(t,1)}}})),o.addEventListener("click",(function(){axios.post($utils.BASE_URL+"/sports/saveCourse",{userId:e,courseIds:r}).then((function(e){0==e.data.status&&$utils.showToast("icon-toast-correct","修改成功",2e3)})).catch((function(e){t.style.display="none",$utils.showToast("icon-toast-correct","修改失败",2e3),console.log(e)})),setTimeout((function(){location.href="./sports_train.html"}),2e3)}))}))}();